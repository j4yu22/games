:root {
    --card-width: 100px;
    --card-height: 143px;
    --card-radius: 10px;
    --card-border: 5px;

    --card-outline: rgba(0, 0, 0, 0.65);
    --card-shadow: rgba(0, 0, 0, 0.45);
}

/* ---------- Base card ---------- */

.card {
    width: var(--card-width);
    height: var(--card-height);

    border: var(--card-border) solid #fff;
    border-radius: var(--card-radius);
    background: #fff;

    /* Clip the image cleanly inside the rounded border */
    overflow: hidden;
    position: relative;

    /* No box-shadow here (we'll use drop-shadow on the image so it isn't clipped) */
    box-shadow: none;
    outline: 1px solid var(--card-outline);

    z-index: 0;
}

.card img {
    width: 100%;
    height: 100%;
    display: block;

    /* Let the art fill the inside cleanly */
    object-fit: cover;

    /* This shadow is outside the clipping and looks clean when overlapping */
    filter:
        drop-shadow(0 6px 14px var(--card-shadow))
        drop-shadow(0 0 0.5px var(--card-outline));

    /* Keep image from creating weird stacking behaviors */
    position: relative;
    z-index: 1;
}

/* Hover: lift and bring to front */
.card.selectable:hover {
    transform: translateY(-6px);
    cursor: pointer;
    z-index: 10;
}

/* ---------- Deck stack ---------- */

.card-deck {
    position: relative;
    width: var(--card-width);
    height: var(--card-height);
}

/* Background stack layers */
.card-deck.stacked::before,
.card-deck.stacked::after {
    content: "";
    position: absolute;
    inset: 0;

    /* Critical: keep border inside the same box size */
    box-sizing: border-box;

    border: var(--card-border) solid #fff;
    border-radius: var(--card-radius);

    background: url("../images/cards/facedown_card.jpg") no-repeat center / cover;

    box-shadow:
        0 6px 14px rgba(0, 0, 0, 0.35),
        0 0 0 1px var(--card-outline);
}

/* First layer */
.card-deck.stacked::before {
    transform: translate(3px, 3px);
    z-index: -1;
}

/* Second layer */
.card-deck.stacked::after {
    transform: translate(6px, 6px);
    z-index: -2;
}

/* Top card stays above the stack */
.facedown-card {
    position: relative;
    z-index: 1;
}
